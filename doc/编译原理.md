# 编译原理

### 第一章	引论

#### 1.程序设计语言与编译

- 程序设计语言

  - 高级语言
  - 汇编语言
  - 机器语言

- 在计算机上如何执行一个高级语言程序

  - 把高级语言翻译成机器语言程序
  - 运行所得的机器语言程序求得计算结果

- 翻译

  - 把某种语言的源程序，在不改变语义的条件下，转换为另一种语言程序-目标语言程序，两种是实现方式：
    - 编译
      - 专指由高级语言转换为低级语言
    - 解释
      - 接收某高级语言的一个语句输入，进行解释并控制计算机执行，马上得到这句的执行结果，然后再接收下一句
      - 以源程序作为输入，不产生目标程序，一边解释一边执行
      - 优点：直观易懂，结构简单，易于实现人机对话
      - 缺点：效率低，不产生目标程序，下次执行还需再解释

- 编译的转换过程

  - 两个阶段转换：编译--------运行

    ![translate](https://github.com/WaitASongTime/My_Study/blob/master/pictures/compile/translate.png)

  - 三个阶段转换：编译--------汇编---------运行

    ![](https://github.com/WaitASongTime/My_Study/blob/master/pictures/compile/translate_three.png)

- 编译程序概述

  - 编译程序的工作

##### 编译程序概述

1. 编译程序的工作

   + 词法分析

   + 语法分析

   + 语义分析和中间代码生成

   + 优化

   + 目标代码生成

     ![](https://github.com/WaitASongTime/My_Study/blob/master/pictures/compile/cp_process.png)

2. 词法分析

   + 任务：输入源程序，对构成源程序的字符串进行扫描和分解，识别出一个个单词
   + 过程：
     + 识别单词：高级语言中有实在意义的最小语法单位，它由字符组成
       + 基本字：
       + 标识符：用户定义的变量名等
       + 常量：
       + 运算符：
       + 界限符：
     + 词法分析依照词法规则，识别出正确的单词，转换成统一规格，备用；
       + 转换
         + 对基本字，运算符，界限符的转换：因为固定和数量基本确定，所以可以一一对应的转换
         + 标识符的转换：用户自定义的，转换为：类号+内码
         + 常数的转换：
         + 转换完成后的格式：（类号、内码）
       + 描述词法规则的有效工具是：
         + 正规式：用来确定单词是否符合语言规范
         + 有限自动机：

3. 语法分析

   + 任务：在词法分析的基础上，根据语言的语法规则，把单词符号组成各类的语法单位：短句，子句，语句，过程，程序
   + 语法规则的表示：
     + -BNF：巴斯克范式，A::=B|C，A定义为B或C
   + 语法分析的方法
     + 推导（derice）
       + 最左推导
       + 最右推导
     + 归约（reduce）

4. 语义分析和中间代码生成

   + 两个阶段的工作
     + 对每种语法范畴进行静态语义检查
       + 语法正确，但是没有真正的意义
     + 若语义正确，就进行中间代码的翻译
   + 中间代码的形式
     + 四元式
       + 算符
       + 左操作数
       + 右操作数
       + 结果
     + 三元式
     + 逆波兰式

5. 优化

   + 任务：对前面产生的中间代码进行加工变换，以期在最后阶段能够产生更为高效的目标代码
   + 原则：等价变换
   + 主要方面：
     + 公共子表达式的提取
     + 合并已知量
     + 删除无用语句：注释等
     + 循环优化等：循环内都是必须的

6. 目标代码生成

   + 任务：把经过优化的中间代码转化为特定机器上的低级语言代码
   + 目标代码的形式
     + 绝对指令代码：可立即执行，但是不同机器的绝对指令代码不同，因此需要根据机器生成对应的绝对指令代码，工作量大；
     + 汇编指令代码
     + 可重定位指令代码：先将各目标模块连接起来，确定变量，常数在主存中的位置，装入主存后才能成为运行的绝对指令代码

7. 表格管理

   + 作用：用来记录源程序的各种信息以及编译过程中的各种状况
   + 与编译前三阶段有关的表格有：
     + 符号表：用来登记源程序中的常量名，变量名，数组名，过程名等，记录他们的性质，定义和引用情况
     + 常数表：
       + 数值型
         + 整型
         + 实型
       + 逻辑型
       + 字符型
     + 标号表：
     + 入口名表：登记过程的层号
     + 中间代码表

8. 出错处理

   + 任务：如果源程序有错误，编译程序应设法发现错误，并报告给用户
   + 错误类型：
     + 语法错误
     + 语义错误

9. 遍

   + 对源程序或源程序的中间结果从头到尾扫描一次，并做有关的加工处理，生成新的中间结果或目标代码
   + 一遍扫描
   + 多遍扫描
     + 优点：节省空间，提高目标代码质量，使编译的逻辑节构清晰
     + 缺点：编译时间较长

##### 编译程序

1. 编译程序的生成方式
   + 直接用机器语言编写编译程序
   + 用汇编语言编写编译程序（编译程序的核心部分常用汇编语言描写）
   + 用高级语言编写的编译程序（普遍采用的方法）
   + 自编译
   + 编译工具
     + LEX
     + YACC
   + 移植（同种语言的编译程序在不同类型的机器之间移植）
2. 编译程序构造
   + 在某机器上为某种语言构造编译程序要掌握一下三方面：
     + 源语言
     + 目标语言
     + 编译方法

------

### 第二章	编译基础知识

#### 一、高级语言

1. 概念

   + 程序语言是一个记号系统
     + 语法：
     + 语义

2. 语法

   + 任何语言程序都可以看成是一定字符集上的字符串

   + 语法使得这串字符形成一个形式上正确的程序

   + 语法 = 词法规则 + 语法规则

   + 词法规则

     + 词法规则规定了字母表中哪些字符串是单词符号
     + 单词符号：常量，标识符，基本字，算符，界限符等
     + 我们用正规式和有限自动机理论来描述词法结构和进行词法分析

   + 语法

     + 语法单位
       + 表达式，子句，语句，函数，过程，程序
     + 语法规则
       + 规定了如何从单词符号来形成语法单位

   + 字母表：符号的非空有穷集合

   + 符号：语言中最基本的不可再分的单位

   + 句子：字母表上符合某种规则构成的串

   + 语言：字母表上句子的集合 

   + 运算：

     - 连接运算
     - 闭包
       - *闭包：
       - 正闭包：不包括空集

   + 文法

     - 文法是描述语言的语法结构的形成规则
     - 非终结符<>：出现在规则的左部，表示一定语法概念的词
     - 终结符：语言中不可再分割的字符串，终结符是组成句子的基本单位
     - 开始符号：又称为识别符号
     - 产生式：定义符号串之间的关系
     - 推导：
       - 从开始符号开始，通过使用产生式的右部取代左部，最终能产生语言的一个句子的过程。
       - 最左（右）推导：每次使用一个规则，以其右部取代符号串最左（右）非终结符

   + s

   + 2

   + 3

     

     

     

     

     















